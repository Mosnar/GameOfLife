!function(){var t={col:20,row:20,width:500,height:380,canvas:null,ctx:null,running:!1,config:{drawGrid:!0,colorGrid:"#ddd",colorCell:"#fff",speed:500},helpers:{},eventHandlers:{},data:[]};t.init=function(){this.helpers.parent=this,this.canvas=document.getElementById("canv"),this.ctx=this.canvas.getContext("2d"),this.$btnStep=document.getElementById("btnStep"),this.$btnPlay=document.getElementById("btnPlay"),this.width=this.canvas.width,this.height=this.canvas.height,this.drawGrid();for(var t=0;t<this.col;t++){this.data[t]=[];for(var e=0;e<this.row;e++)this.data[t][e]=0}this.drawCells(),this.canvas.addEventListener("click",this.eventHandlers.mouseClick.bind(this),!0),this.$btnStep.addEventListener("click",this.eventHandlers.stepClick.bind(this),!0),this.$btnPlay.addEventListener("click",this.eventHandlers.playClick.bind(this),!0)},t.stepAndRender=function(){this.logicalStep(),this.clear(),this.drawCells(),this.running&&setTimeout(function(){t.stepAndRender()},this.config.speed)},t.loadData=function(){},t.exportData=function(){},t.drawGrid=function(){if(this.config.drawGrid){for(var t=this.helpers.getCellDimensions(),e=t.w;e<this.width;e+=t.w)this.ctx.moveTo(e,0),this.ctx.lineTo(e,this.width);for(var i=t.h;i<this.height;i+=t.h)this.ctx.moveTo(0,i),this.ctx.lineTo(this.width,i);this.ctx.strokeStyle=this.config.colorGrid,this.ctx.stroke()}},t.activateCell=function(t){1!==this.data[t.x][t.y]&&(this.data[t.x][t.y]=1,this.clear(),this.drawCells())},t.deactivateCell=function(t){this.data[t.x][t.y]&&(this.data[t.x][t.y]=0,this.clear(),this.drawCells())},t.getCellNeighbors=function(t){for(var e,i,s,n=[],h=-1;1>=h;h++)for(var l=-1;1>=l;l++)0==h&&0==l||(e=t.x+h,i=t.y+l,s={x:e,y:i},this.helpers.isCellValid(s)&&1===this.data[s.x][s.y]&&n.push(s));return n},t.helpers.isCellValid=function(t){return t.x<0||t.y<0?!1:!(t.x>=this.parent.col||t.y>=this.parent.row)},t.renderCell=function(t){var e=this.helpers.getCellDimensions(),i=e.w*t.x,s=e.h*t.y;this.ctx.fillStyle=this.config.colorCell,this.ctx.fillRect(i,s,e.w,e.h)},t.drawCells=function(){for(var t=0;t<this.col;t++)for(var e=0;e<this.row;e++)1===this.data[t][e]&&this.renderCell({x:t,y:e})},t.logicalStep=function(){for(var t,e,i=this.data.map(function(t){return t.slice()}),s=0;s<this.col;s++)for(var n=0;n<this.row;n++)e={x:s,y:n},t=this.getCellNeighbors(e),1===this.data[s][n]?(t.length<2&&(i[s][n]=0),t.length>3&&(i[s][n]=0)):3==t.length&&(i[s][n]=1);this.data=i},t.clear=function(){this.ctx.clearRect(0,0,this.width,this.height),this.drawGrid()},t.handleMouseMove=function(t){this.activateCell(t)},t.handleMouseClick=function(t){this.activateCell(t)},t.eventHandlers.mouseMove=function(t){this.handleMouseMove(this.helpers.translateMousePos(this.helpers.getRelativeMousePos(t)))},t.eventHandlers.mouseClick=function(t){this.handleMouseClick(this.helpers.translateMousePos(this.helpers.getRelativeMousePos(t)))},t.eventHandlers.stepClick=function(t){return this.stepAndRender(),t.preventDefault(),!1},t.eventHandlers.playClick=function(t){return this.running?(this.running=!1,this.$btnPlay.innerText="Play",this.$btnStep.removeAttribute("disabled")):(this.running=!0,this.$btnPlay.innerText="Pause",this.$btnStep.setAttribute("disabled","true"),this.stepAndRender()),t.preventDefault(),!1},t.helpers.getRelativeMousePos=function(t){var e=this.parent.canvas.getBoundingClientRect(),i=t.clientX-e.left,s=t.clientY-e.top;return{x:i,y:s}},t.helpers.getCellDimensions=function(){var t=this.parent.width/this.parent.col,e=this.parent.height/this.parent.row;return{w:t,h:e}},t.helpers.translateMousePos=function(t){var e=this.getCellDimensions(),i=Math.floor(t.x/e.h),s=Math.floor(t.y/e.w);return{x:i,y:s}},window.addEventListener("load",t.init(),!1)}();
//# sourceMappingURL=GameOfLife.js.map
